{% extends "aplication/base.html" %}
{% load static %}
{% block titulo %}
Ventas
{% endblock%}

{% block body %}
{% include "venta/navbar.html" %}

<template id="template-prod">
	<tr>
		<td class="pname-td"></td>
		<td class="pquantity-td"></td>
		<td>
			<button class='btn btn-small btn-danger delBtn'>
				<i class='bi bi-trash delBtn'></i>
			</button>
		</td>
		<input name='prod' type='hidden'></tr>
</template>

<div class="container-fluid position-relative">

    <div class="row flex-nowrap">
        <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-danger ">
		{% include "venta/sidebar.html" %}

    <!-- INICIA MODAL SINC -->
		{% include "venta/modalsinc.html" %}
    <!-- FIN MODAL SINC -->
    <!-- INICIA MODAL DETAIL -->
		{% include "venta/modaldetail.html" %}
    <!-- FIN MODAL DETAIL -->

        <div class="col py-3 mt-5 " style="z-index:1045">
            <section class="container">
                <h1>Orders</h1>
<div id="alerta1" class="alert alert-danger" role="alert" hidden>
	<strong>Range error:</strong> the end date must be greater than or equal to the start date.
</div>

<div class="row align-items-end">

<form method="post" id="SearchForm" class="row align-items-end col-xl-9">
	{% csrf_token %}

    <div class="col-sm-5 col-xl-3  form-group my-2">
        <label>Order date</label>
        <input id="FechaInicial" name="FechaInicial" type="date" class="form-control">
    </div>
    <div class=" col-sm-6 col-xl-3 my-2">
        <label>to</label>
        <input id="FechaFinal" name="FechaFinal" type="date" class="form-control">
    </div>
    <div class="col-sm-12 col-xl-6 my-2">
         <div class="input-group">
			<div class="input-group-prepend">
				<span class="input-group-text" id="basic-addon1">
					<i class="bi bi-search"></i>
				</span>
			</div>
			<input id="buscar" value="{{search}}" name="search" type="search" class="form-control">
		</div>
    </div>
</form>

<div class="row align-items-end col-xl-3">
	<div class="col-sm-12 col-xl-4 my-2 d-grid">
        <button class="btn btn-block btn-danger" data-bs-toggle="modal" data-bs-target="#sincModal">
           Sinc
        </button>
    </div>
    <div class="col-sm-12 col-xl-4 my-2 d-grid">
        <button class="btn btn-block btn-warning">
           Export
        </button>
    </div>
     <div class="col-sm-12 col-xl-4 my-2 d-grid">
        <button form="SearchForm" name="nombre" value="search" type="submit" class="btn btn-block btn-primary">Search</button>
    </div>
</div>
</div>				
    <!-- INICIA TABLA -->
   	<div class="table-responsive">
	<table class="table mt-5">
    <thead class="table-dark" style="--bs-table-bg:#dc3545;--bs-table-border-color:#dc3545">
      <tr>
        <th>Date</th>
        <th>Status</th>
        <th>Hour</th>
        <th>Delivery</th>
        <th>Cancel</th>
        <th>Client/ Tel/ Direccion</th>
		<th></th>
      </tr>
    </thead>
    <tbody id="filastabla">
    {% for pedido in pedidos %}
      <tr id="{{ pedido.IdPedidoSquare }}" name="rowtable">
		  <td >
			  <div>
			  {{ pedido.Fecha|date:"d - m - Y"  }}
			  </div>
		  </td>
          <td class="text-center" style= "color:{{pedido.Estado.color}}" >
              <i class="bi bi-circle-fill"></i>
          </td>
        <td>{{ pedido.Hora }}</td>
         <td class="text-center">
             {% if pedido.Servicio.Tipo == 'D' %}
			    <i class="bi bi-check-circle-fill"></i>
            {% endif %}
         </td>
        <td class="text-center" style="color:red">
            {% if pedido.Cancelado %}
                <i class="bi bi-check-circle-fill"></i>
            {% endif %}
        </td>
        <td>
			{{pedido.NombreCliente}}
			{% if pedido.Telefono != 'sin direccion'%}
			/ {{pedido.Telefono}}
			{% endif %}
			{% if pedido.Direccion != 'sin direccion' %}
			/ {{pedido.Direccion}} </td>
			{% endif %}
		<td>
<button class="btn btn-block btn-success" data-bs-toggle="modal" data-bs-target="#detailModal" >
			<i class="bi bi-bookmark-plus"></i>
</button>

		</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
	</div>
            </section>
        </div>
    </div>
</div>
{% endblock %}

